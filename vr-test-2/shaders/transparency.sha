//Cg
// Shader to turn all colors under a certain threshold transparent

void vshader(
    float4 vtx_position : POSITION,
    float2 vtx_texcoord0 : TEXCOORD0,
    out float4 l_position : POSITION,
    out float2 l_texcoord0 : TEXCOORD0,
    uniform float4x4 mat_modelproj)
{
    l_position = mul(mat_modelproj, vtx_position);
    l_texcoord0 = vtx_texcoord0;
}

void fshader(float2 l_texcoord0 : TEXCOORD0,
             out float4 o_color : COLOR,
             uniform sampler2D k_tex2 : TEXUNIT0)
{
    float4 c = tex2D(k_tex2, l_texcoord0);
    if (c.r < 0.05 && c.g < 0.05 && c.b < 0.05)
        c.a = 0;
    else
        c.a = 1; // Ensure non-transparent colors have full opacity
    o_color = c;
}
